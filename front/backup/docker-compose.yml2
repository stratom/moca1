services:
  oracle-python-app:
    image: oraclelinux:8
    container_name: frontendai
    restart: unless-stopped
    volumes:
      - ~/.oci:/root/.oci  # OCI config y key
    working_dir: /app
    ports:
      - "5000:5000"
    environment:
      - PYTHONUNBUFFERED=1
    command: >
      sh -c "
      dnf install -y python39 python39-pip libaio curl &&
      curl -fsSL https://rpm.nodesource.com/setup_18.x | bash - &&
      dnf install -y nodejs &&
      alternatives --set python /usr/bin/python3.9 &&
      alternatives --set python3 /usr/bin/python3.9 &&
      python3 -m pip install --upgrade pip &&
      python3 -m pip install oci oracledb PyPDF2 flask langchain langchain-community langchain-core python-dotenv &&
      mkdir -p /app/api && 
      echo '✅ Entorno listo. Puedes ahora copiar tu código manualmente.' &&
      tail -f /dev/null
      "      
